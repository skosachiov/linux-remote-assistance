- name: Create no-shell user
  block:
    - name: Create no-shell user Useradd
      user:
        name: no-shell
        shell: /bin/false
        append: yes
        generate_ssh_key: yes
    - name: Create no-shell user Add cert to authorized keys
      authorized_key:
        user: no-shell
        state: present
        key: /home/no-user/.ssh/id_rsa.pub
  tags:
    - server
    - create_no_shell_user

- name: Ensure openssh-server is installed
  block:
    - name: Ensure openssh-server is installed Package
      package:
        name: openssh-server
        state: present
    - name: Ensure openssh-server is installed Started
      service:
        name: openssh-server
        state: started
  tags:
    - server
    - openssh_server_is_started

- name: Install client dependencies
  package:
    name:
      - x11vnc
      - tigervnc
      - zenity
    state: present
  tags:
    - client
    - install_client_dependencies

# TODO - server_rollback
# TODO - client_rollback
    
